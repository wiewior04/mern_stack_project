{"ast":null,"code":"import _regeneratorRuntime from\"/Users/akaczmarek/Desktop/usi-project/mern_stack_project/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/akaczmarek/Desktop/usi-project/mern_stack_project/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/akaczmarek/Desktop/usi-project/mern_stack_project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import ReactQuill from\"react-quill\";import{useState}from\"react\";import'react-quill/dist/quill.snow.css';import{Navigate}from'react-router-dom';import Editor from\"../Editor\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CreatePost(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),summary=_useState4[0],setSummary=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),content=_useState6[0],setContent=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),files=_useState8[0],setFiles=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),redirect=_useState10[0],setRedirect=_useState10[1];function createNewPost(_x){return _createNewPost.apply(this,arguments);}function _createNewPost(){_createNewPost=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(ev){var data,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:data=new FormData();data.set('title',title);data.set('summary',summary);data.set('content',content);data.set('file',files[0]);ev.preventDefault();_context.next=8;return fetch('http://localhost:4000/post',{method:'POST',body:data,credentials:'include'});case 8:response=_context.sent;if(response.ok){setRedirect(true);}case 10:case\"end\":return _context.stop();}},_callee);}));return _createNewPost.apply(this,arguments);}if(redirect){return/*#__PURE__*/_jsx(Navigate,{to:'/'});}return/*#__PURE__*/_jsxs(\"form\",{onSubmit:createNewPost,children:[/*#__PURE__*/_jsx(\"input\",{type:\"title\",placeholder:\"Title\",value:title,onChange:function onChange(ev){return setTitle(ev.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"summary\",placeholder:\"Summary\",value:summary,onChange:function onChange(ev){return setSummary(ev.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:function onChange(ev){return setFiles(ev.target.files);}}),/*#__PURE__*/_jsx(Editor,{value:content,onChange:setContent}),/*#__PURE__*/_jsx(\"button\",{style:{marginTop:'5px'},children:\"Create post\"})]});}","map":{"version":3,"names":["ReactQuill","useState","Navigate","Editor","jsx","_jsx","jsxs","_jsxs","CreatePost","_useState","_useState2","_slicedToArray","title","setTitle","_useState3","_useState4","summary","setSummary","_useState5","_useState6","content","setContent","_useState7","_useState8","files","setFiles","_useState9","_useState10","redirect","setRedirect","createNewPost","_x","_createNewPost","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","ev","data","response","wrap","_callee$","_context","prev","next","FormData","set","preventDefault","fetch","method","body","credentials","sent","ok","stop","to","onSubmit","children","type","placeholder","value","onChange","target","style","marginTop"],"sources":["/Users/akaczmarek/Desktop/usi-project/mern_stack_project/client/src/pages/CreatePost.js"],"sourcesContent":["import ReactQuill from \"react-quill\";\nimport { useState } from \"react\";\nimport 'react-quill/dist/quill.snow.css';\nimport {Navigate} from 'react-router-dom';\nimport Editor from \"../Editor\";\n\n\nexport default function CreatePost(){\n    const [title, setTitle] = useState('');\n    const [summary, setSummary] = useState('');\n    const [content, setContent] = useState('');\n    const [files, setFiles] = useState('');\n    const [redirect, setRedirect] = useState(false);\n    async function createNewPost(ev) {\n        const data = new FormData();\n        data.set('title',title);\n        data.set('summary',summary);\n        data.set('content',content);\n        data.set('file',files[0]);\n        ev.preventDefault();\n        const response = await fetch('http://localhost:4000/post', {\n            method:'POST',\n            body:data,\n            credentials: 'include',\n        });\n       if (response.ok) {\n            setRedirect(true);\n       }\n    }\n      if (redirect) {\n        return <Navigate to={'/'} />\n        }\n    return(\n        <form onSubmit={createNewPost}>\n            <input type=\"title\"\n                placeholder={\"Title\"}\n                value={title} \n                onChange={ev => setTitle(ev.target.value)} /> \n            <input type=\"summary\"\n                placeholder={\"Summary\"}\n                value={summary}\n                onChange={ev => setSummary(ev.target.value)} />\n            <input type=\"file\"\n                onChange={ev => setFiles(ev.target.files)} />\n            <Editor value={content} onChange={setContent} />\n            <button style={{marginTop:'5px'}}>Create post</button>\n        </form>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}